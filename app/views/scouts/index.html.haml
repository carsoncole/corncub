

.row
  .col-md-12
    .card
      .card-block
        .card-title
          %h3 Scouts / Administrators
     

        %ul.nav.nav-tabs
          %li.nav-item
            = link_to scouts_path(active: true), class: "nav-link #{'active' if params[:active] || (params[:administrators].blank? && params[:inactive].blank?) }" do
              Scouts
              = surround("(", ")") do
                = @scouts.length
          %li.nav-item
            = link_to scouts_path(administrators: true), class: "nav-link #{'active' if params[:administrators]}" do
              Administrators
              = surround("(", ")") do
                = @administrators.length
          - if @inactive_scouts.length != 0
            %li.nav-item
              = link_to scouts_path(inactive: true), class: "nav-link #{'active' if params[:inactive]}" do
                Inactive
                = surround("(", ")") do
                  = @inactive_scouts.length            
        %br
        - unless params[:inactive].present? || params[:administrators].present?
          .table-responsive
            %table.table.card-text
              %thead
                %tr
                  %th Name
                  %th Take Orders
                  %th Site Sales
                  %th Online
                  %th Total Sales
                  %th Event
                  %th Last Sign In
                  %th Sign In Count
                  - if current_scout.admin?
                    %th
                    %th.hidden-print

              %tbody
                - @scouts = @inactive_scouts if params[:inactive].present?
                - @scouts.each do |scout|
                  %tr
                    %td
                      %i.fa.fa-user
                      = link_to scout.name, scout_path(scout)
                    %td
                      - unless scout.is_admin? || @active_event.nil?
                        = link_to number_to_currency(TakeOrder.scout_sales(scout, @active_event), precision: 0), take_orders_path(scout_id: scout.id)
                    %td
                      - unless scout.is_admin? || @active_event.nil?
                        = link_to number_to_currency(scout.total_site_sales(@active_event), precision: 0), site_sales_path(scout_id: scout.id)
                    %td
                      - unless scout.is_admin? || @active_event.nil?
                        = link_to number_to_currency(scout.total_online_sales(@active_event), precision: 0), online_sales_path(scout_id: scout.id)
                    %td
                      - unless scout.is_admin? || @active_event.nil?
                        = number_to_currency(scout.total_sales(@active_event), precision: 0)
                    %td= scout.event.name if scout.event
                    %td= nice_date_time_compact(scout.last_sign_in_at) if scout.last_sign_in_at
                    %td= scout.sign_in_count
                    - if current_scout.admin?
                      %td.hidden-print
                        = link_to edit_scout_path(scout) do
                          %span.fa.fa-pencil.fa-lg
                        - if scout.is_active?
                          = link_to scout, :method => :delete, :data => { :confirm => 'Are you sure?' } do
                            %span.fa.fa-trash.fa-lg
                    
        - if params[:administrators].present?
          .table-responsive
            %table.table.card-text
              %thead
                %tr
                  %th Name
                  %th General
                  %th Take Orders
                  %th Site Sales
                  %th Online Sales
                  %th Prizes
                  %th Super Admin
                  %th Last Sign In
                  %th Sign In Count
                  - if current_scout.admin?
                    %th
                    %th.hidden-print
                    %th.hidden-print

              %tbody
                - @administrators.each do |scout|
                  %tr
                    %td
                      %i.fa.fa-user
                      = link_to scout.name, scout_path(scout)
                    %td
                      - if scout.is_admin?
                        %i.fa.fa-check
                    %td
                      - if scout.is_take_orders_admin?
                        %i.fa.fa-check
                    %td
                      - if scout.is_site_sales_admin?
                        %i.fa.fa-check
                    %td
                      - if scout.is_online_sales_admin?
                        %i.fa.fa-check
                    %td
                      - if scout.is_prizes_admin?
                        %i.fa.fa-check
                    %td
                      - if scout.is_super_admin?
                        %i.fa.fa-check
                    %td= nice_date_time_compact(scout.last_sign_in_at)
                    %td= scout.sign_in_count
                    - if current_scout.admin?
                      %td.hidden-print
                        = link_to edit_scout_path(scout) do
                          %span.fa.fa-pencil.fa-lg
                      %td.hidden-print
                        = link_to scout, :method => :delete, :data => { :confirm => 'Are you sure?' } do
                          %span.fa.fa-trash.fa-lg
                    
.row
  .col-md-4
    .card
      .card-block    
        .hidden-print      
          = link_to new_scout_path do
            %i.fa.fa-plus.fa-lg
            Add a new Scout/Administrator
